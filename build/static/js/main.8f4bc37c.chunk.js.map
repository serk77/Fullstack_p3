{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/backend.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","onChange","handleFilter","value","filter","PersonForm","onSubmit","handleSubmit","handleNameChange","newName","handlePhoneChange","phone","type","Persons","persons","person","name","includes","map","id","onClick","deletePerson","baseUrl","axios","get","then","response","data","noteObject","console","log","post","delete","put","Notification","className","style","text","App","useState","setPersons","setNewName","setPhone","setFilter","toggle","setToggle","notificationText","setNotificationText","notificationName","setNotificationName","notificationStyle","setNotificationStyle","useEffect","phonebookService","initialPersons","e","target","preventDefault","personToChange","some","p","oldPerson","find","newPerson","window","confirm","returnedPerson","setTimeout","catch","error","status","concat","newPersons","item","ReactDOM","render","document","getElementById"],"mappings":"iKAUeA,EARA,SAACC,GACd,OACE,2CACU,uBAAOC,SAAUD,EAAME,aAAcC,MAAOH,EAAMI,aCajDC,EAhBI,SAACL,GAClB,OACE,uBAAMM,SAAUN,EAAMO,aAAtB,UACE,yCACQ,uBAAON,SAAUD,EAAMQ,iBAAkBL,MAAOH,EAAMS,aAE9D,2CACU,uBAAOR,SAAUD,EAAMU,kBAAmBP,MAAOH,EAAMW,WAEjE,8BACE,wBAAQC,KAAK,SAAb,uBCeOC,EAzBC,SAACb,GACf,OACE,8BACGA,EAAMI,OACHJ,EAAMc,QACHV,QAAO,SAACW,GAAD,OAAYA,EAAOC,KAAKC,SAASjB,EAAMI,WAC9Cc,KAAI,SAACH,GAAD,OACH,8BACGA,EAAOC,KADV,IACiBD,EAAOJ,QADhBI,EAAOI,OAInBnB,EAAMc,QAAQI,KAAI,SAACH,GAAD,OAChB,8BACGA,EAAOC,KADV,IACiBD,EAAOJ,MAAO,IAC7B,wBACES,QAAS,kBAAMpB,EAAMqB,aAAaN,EAAOI,GAAIJ,EAAOC,OADtD,sBAFMD,EAAOI,U,gBCbrBG,EAAU,oCAwBD,EAtBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAoB9B,EAjBA,SAACC,GAGd,OAFAC,QAAQC,IAAIF,GACIL,IAAMQ,KAAKT,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAc9B,EAXA,SAACR,GAEd,OADgBI,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BH,IAC5BM,MAAK,SAACC,GAAD,OAAcA,EAASC,SAS9B,EANA,SAACR,EAAIS,GAElB,OADgBL,IAAMU,IAAN,UAAaX,GAAb,OAAuBH,GAAMS,GAC9BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SCX9BO,EARM,SAAClC,GACpB,OACE,sBAAKmC,UAAWnC,EAAMoC,MAAtB,UACGpC,EAAMqC,KADT,IACgBrC,EAAMgB,SC+JXsB,EA7JH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOzB,EAAP,KAAgB0B,EAAhB,KACA,EAA8BD,mBAAS,IAAvC,mBAAO9B,EAAP,KAAgBgC,EAAhB,KACA,EAA0BF,mBAAS,IAAnC,mBAAO5B,EAAP,KAAc+B,EAAd,KACA,EAA4BH,mBAAS,IAArC,mBAAOnC,EAAP,KAAeuC,EAAf,KACA,EAA4BJ,oBAAS,GAArC,mBAAOK,EAAP,KAAeC,EAAf,KACA,EAAgDN,mBAAS,IAAzD,mBAAOO,EAAP,KAAyBC,EAAzB,KACA,EAAgDR,qBAAhD,mBAAOS,EAAP,KAAyBC,EAAzB,KACA,EAAkDV,mBAAS,gBAA3D,mBAAOW,EAAP,KAA0BC,EAA1B,KAEAC,qBAAU,WACRC,IAA0B5B,MAAK,SAAC6B,GAC9Bd,EAAWc,QAEZ,IAsHH,OACE,gCACE,2CACCV,GACC,cAAC,EAAD,CACEP,KAAMS,EACN9B,KAAMgC,EACNZ,MAAOc,IAGX,cAAC,EAAD,CAAQhD,aAdS,SAACqD,GACpBZ,EAAUY,EAAEC,OAAOrD,QAamBC,OAAQA,IAC5C,kDACA,cAAC,EAAD,CACEG,aAvGe,SAACgD,GACpBA,EAAEE,iBACF,IAAM7B,EAAa,CACjBZ,KAAMP,EACNE,MAAOA,GAGH+C,EAAiB5C,EAAQ6C,MAAK,SAACC,GAAD,OAAOA,EAAE5C,OAASP,KAChDoD,EAAY/C,EAAQgD,MAAK,SAACF,GAAD,OAAOA,EAAE5C,OAASP,KAC3CsD,EAAS,2BAAQF,GAAR,IAAmBlD,MAAOA,IAErC+C,EACFM,OAAOC,QAAP,UACKxD,EADL,4EAGE4C,EACUQ,EAAU1C,GAAI4C,GACrBtC,MAAK,SAACyC,GACL1B,EACE1B,EAAQI,KAAI,SAACH,GAAD,OACVA,EAAOI,KAAO0C,EAAU1C,GAAKJ,EAASmD,MAG1Cf,EAAqB,gBACrBJ,EAAoB,YACpBE,EAAoBY,EAAU7C,MAC9B6B,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,QAEJuB,OAAM,SAACC,GACwB,MAA1BA,EAAM3C,SAAS4C,QACjBnB,EAAqB,WACrBJ,EAAoB,GAAD,OAAIsB,EAAM3C,SAASC,KAAK0C,QAC3CpB,EAAoB,KACpBJ,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,OAEHM,EAAqB,WACrBJ,EACE,wDAEFE,EAAoBY,EAAU7C,MAC9B6B,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,SAIXQ,EACUzB,GACPH,MAAK,SAACyC,GACL1B,EAAW1B,EAAQyD,OAAOL,IAC1Bf,EAAqB,gBACrBJ,EAAoB,UACpBE,EAAoBiB,EAAelD,MACnC6B,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,QAEJuB,OAAM,SAACC,GACNlB,EAAqB,WACrBJ,EAAoB,GAAD,OAAIsB,EAAM3C,SAASC,KAAK0C,QAC3CpB,EAAoB,KACpBJ,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,QAITJ,EAAW,IACXC,EAAS,KA2BLlC,iBAxBmB,SAAC+C,GACxBd,EAAWc,EAAEC,OAAOrD,QAwBhBO,kBAtBoB,SAAC6C,GACzBb,EAASa,EAAEC,OAAOrD,QAsBdM,QAASA,EACTE,MAAOA,IAET,yCACA,cAAC,EAAD,CAASP,OAAQA,EAAQU,QAASA,EAASO,aAxI1B,SAACF,EAAIH,GACxBgD,OAAOC,QAAP,iBAAyBjD,EAAzB,OACEqC,EACUlC,GACPM,MAAK,WACJ,IAAM+C,EAAa1D,EAAQV,QAAO,SAACqE,GAAD,OAAUA,EAAKtD,KAAOA,KACxDqB,EAAWgC,GACXrB,EAAqB,gBACrBJ,EAAoB,wBACpBE,EAAoBjC,GACpB6B,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,QAEJuB,OAAM,WACLjB,EAAqB,WACrBJ,EAAoB,kDACpBE,EAAoBjC,GACpB6B,GAAWD,GACXuB,YAAW,WACTtB,GAAU,KACT,eCzCb6B,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.8f4bc37c.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter: <input onChange={props.handleFilter} value={props.filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        name: <input onChange={props.handleNameChange} value={props.newName} />\r\n      </div>\r\n      <div>\r\n        number: <input onChange={props.handlePhoneChange} value={props.phone} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = (props) => {\r\n  return (\r\n    <div>\r\n      {props.filter\r\n        ? props.persons\r\n            .filter((person) => person.name.includes(props.filter))\r\n            .map((person) => (\r\n              <p key={person.id}>\r\n                {person.name} {person.phone}\r\n              </p>\r\n            ))\r\n        : props.persons.map((person) => (\r\n            <p key={person.id}>\r\n              {person.name} {person.phone}{\" \"}\r\n              <button\r\n                onClick={() => props.deletePerson(person.id, person.name)}\r\n              >\r\n                Delete\r\n              </button>\r\n            </p>\r\n          ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (noteObject) => {\r\n  console.log(noteObject)\r\n  const request = axios.post(baseUrl, noteObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, noteObject) => {\r\n  const request = axios.put(`${baseUrl}${id}`, noteObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default { getAll, create, remove, update };\r\n","import React from \"react\";\r\n\r\nconst Notification = (props) => {\r\n  return (\r\n    <div className={props.style}>\r\n      {props.text} {props.name}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport phonebookService from \"./services/backend\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [toggle, setToggle] = useState(false);\n  const [notificationText, setNotificationText] = useState(\"\");\n  const [notificationName, setNotificationName] = useState();\n  const [notificationStyle, setNotificationStyle] = useState(\"notification\");\n\n  useEffect(() => {\n    phonebookService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const handleRemove = (id, name) => {\n    window.confirm(`Delete ${name}?`) &&\n      phonebookService\n        .remove(id)\n        .then(() => {\n          const newPersons = persons.filter((item) => item.id !== id);\n          setPersons(newPersons);\n          setNotificationStyle(\"notification\");\n          setNotificationText(\"Succesfully deleted \");\n          setNotificationName(name);\n          setToggle(!toggle);\n          setTimeout(() => {\n            setToggle(false);\n          }, 5000);\n        })\n        .catch(() => {\n          setNotificationStyle(\"warning\");\n          setNotificationText(\"Number is already deleted from the phonebook: \");\n          setNotificationName(name);\n          setToggle(!toggle);\n          setTimeout(() => {\n            setToggle(false);\n          }, 5000);\n        });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const noteObject = {\n      name: newName,\n      phone: phone,\n    };\n\n    const personToChange = persons.some((p) => p.name === newName);\n    const oldPerson = persons.find((p) => p.name === newName);\n    const newPerson = { ...oldPerson, phone: phone };\n\n    if (personToChange) {\n      window.confirm(\n        `${newName} ia already added to phonebook, replace the old number with a new one?`\n      ) &&\n        phonebookService\n          .update(oldPerson.id, newPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== oldPerson.id ? person : returnedPerson\n              )\n            );\n            setNotificationStyle(\"notification\");\n            setNotificationText(\"Updated \");\n            setNotificationName(oldPerson.name);\n            setToggle(!toggle);\n            setTimeout(() => {\n              setToggle(false);\n            }, 5000);\n          })\n          .catch((error) => {\n            if (error.response.status === 406) {\n              setNotificationStyle(\"warning\");\n              setNotificationText(`${error.response.data.error}`);\n              setNotificationName(\" \");\n              setToggle(!toggle);\n              setTimeout(() => {\n                setToggle(false);\n              }, 5000);\n            } else {\n              setNotificationStyle(\"warning\");\n              setNotificationText(\n                \"This number was already deleted from the phonebook: \"\n              );\n              setNotificationName(oldPerson.name);\n              setToggle(!toggle);\n              setTimeout(() => {\n                setToggle(false);\n              }, 5000);\n            }\n          });\n    } else {\n      phonebookService\n        .create(noteObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNotificationStyle(\"notification\");\n          setNotificationText(\"Added \");\n          setNotificationName(returnedPerson.name);\n          setToggle(!toggle);\n          setTimeout(() => {\n            setToggle(false);\n          }, 5000);\n        })\n        .catch((error) => {\n          setNotificationStyle(\"warning\");\n          setNotificationText(`${error.response.data.error}`);\n          setNotificationName(\" \");\n          setToggle(!toggle);\n          setTimeout(() => {\n            setToggle(false);\n          }, 5000);\n        });\n    }\n\n    setNewName(\"\");\n    setPhone(\"\");\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n  const handlePhoneChange = (e) => {\n    setPhone(e.target.value);\n  };\n  const handleFilter = (e) => {\n    setFilter(e.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {toggle && (\n        <Notification\n          text={notificationText}\n          name={notificationName}\n          style={notificationStyle}\n        />\n      )}\n      <Filter handleFilter={handleFilter} filter={filter} />\n      <h2>Add a new number</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleNameChange={handleNameChange}\n        handlePhoneChange={handlePhoneChange}\n        newName={newName}\n        phone={phone}\n      />\n      <h2>Numbers</h2>\n      <Persons filter={filter} persons={persons} deletePerson={handleRemove} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport axios from 'axios'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}